"use strict";(self.webpackChunksketchfab=self.webpackChunksketchfab||[]).push([[7023],{nnpx:(e,t,n)=>{n.d(t,{Z:()=>b});var i=n("D4hk"),o=n("sQwH"),r=n("qD8I"),a=n("CUcO"),s=n("8N4v"),c=n("Zfzx"),u=n("FUT3"),l=n("hayj"),d=n("xKIK"),h=n("Cgfs"),g=n("3Z9q"),v=n("jQKg"),f=n("X40V"),Z=n("45Yh"),k=n("yTkX"),p=(n("lotc"),n("Oyie"));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,l.Z)(e);if(t){var o=(0,l.Z)(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return(0,u.Z)(this,n)}}var m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.25;return new p((function(i,o){var r={height:1/0},a=t.reduce((function(t,n){return Math.abs(n.height-e)<Math.abs(t.height-e)?n:t}),r);a.height>e*(1-n)&&a.height<e*(1+n)&&a!==r?i(a):o()}))},b=function(e){(0,c.Z)(n,e);var t=w(n);function n(e){var i;return(0,r.Z)(this,n),i=t.call(this,e),(0,d.Z)((0,s.Z)(i),"state",{isVisible:!1,image:{width:100,height:100},containerWidth:1,containerHeight:1,loadingPercent:0,cursorX:0,startCursorX:0}),(0,d.Z)((0,s.Z)(i),"onStart",(function(){i.executeOnNextMove=function(){return i.debouncedLoadPreview()}})),(0,d.Z)((0,s.Z)(i),"onMove",(function(e){var t;i.executeOnNextMove&&(i.executeOnNextMove(),i.executeOnNextMove=void 0);var n=e.target.getBoundingClientRect(),o=n.width,r=n.left,a=(0,k.wv)(e),s=(a.x-r)/o;i.isActive()?i.setState({cursorX:s}):i.show(s);var c=null===(t=i.el)||void 0===t?void 0:t.getBoundingClientRect();c&&((a.x<c.x||a.x>c.x+c.width)&&i.onEnd(),(a.y<c.y||a.y>c.y+c.height)&&i.onEnd())})),(0,d.Z)((0,s.Z)(i),"onEnd",(function(){i.debouncedLoadPreview.cancel(),i.setState({isVisible:!1})})),(0,d.Z)((0,s.Z)(i),"isActive",(function(){return i.state.isVisible&&1===i.state.loadingPercent})),(0,d.Z)((0,s.Z)(i),"loadPreview",(function(){if(1!==i.state.loadingPercent&&i.el){var e=i.el.getBoundingClientRect(),t=e.width,n=e.height;i.setState({loadingPercent:.1,containerWidth:t,containerHeight:n}),v.Z.getModelFallback(i.props.modelUid).then((function(e){return i.setState({loadingPercent:.5}),e.results.images})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return m(i.props.targetHeight,e)})).then((function(e){return(0,Z.po)(e.url).then((function(){return e}))})).then((function(e){i.setState({image:e,loadingPercent:1})})).catch((function(){i.setState({loadingPercent:0})}))}})),(0,d.Z)((0,s.Z)(i),"show",(function(e){i.state.isVisible||1!==i.state.loadingPercent||i.setState({isVisible:!0,cursorX:e,startCursorX:e})})),i.debouncedLoadPreview=(0,h.Z)(i.loadPreview.bind((0,s.Z)(i)),500),i}return(0,a.Z)(n,[{key:"render",value:function(){var e=this,t=this.state.cursorX-this.state.startCursorX,n=Math.floor(15*t),r=this.state.image.width/15,a=(0,f.s7)(r,this.state.image.height,this.state.containerWidth,this.state.containerHeight,0),s=a.width,c=a.height,u=15*s,l=-n/14,d=1===this.state.loadingPercent,h=this.state.isVisible&&1===this.state.loadingPercent;return g.createElement("div",(0,i.Z)({},this.props.previewOnDrag?(0,k.QG)({onDragStart:this.onStart,onDrag:this.onMove,onDragEnd:this.onEnd}):{},{onMouseEnter:this.onStart,onMouseMove:this.onMove,onMouseLeave:this.onEnd,className:"c-model-360-preview",ref:function(t){return e.el=t}}),(0,o.Z)("div",{className:"c-model-360-preview__background ".concat(d?"--loaded":""," ").concat(h?"--visible":"")},void 0,(0,o.Z)("div",{className:"c-model-360-preview__image",style:{backgroundImage:this.state.image.url?"url(".concat(this.state.image.url,")"):"",backgroundPosition:"".concat(100*l,"% center"),backgroundSize:"".concat(u,"px ").concat(c,"px")}})),(0,o.Z)("div",{className:"c-model-360-preview__loading",style:{width:"".concat(100*this.state.loadingPercent,"%"),height:1===this.state.loadingPercent?0:void 0,backgroundColor:this.props.color}}))}}]),n}(g.Component);(0,d.Z)(b,"defaultProps",{color:"",previewOnDrag:!0,targetHeight:400})},"DJY/":(e,t,n)=>{n.d(t,{Z:()=>a});var i=n("sQwH"),o=(n("3Z9q"),n("X40V")),r=n("p5Lb");const a=function(e){var t=e.likeCount,n=e.doesLike,a=e.onToggleLike,s=e.className,c=void 0===s?"":s,u=e.tooltipClassName,l=void 0===u?"tooltip-down":u;return(0,i.Z)("div",{onClick:a,className:(0,o.AK)("help","c-like-button","c-star-like-button",c,{"--liked":n})},void 0,(0,i.Z)("span",{className:"count"},void 0,(0,r.sH)(t)),(0,i.Z)("span",{className:"tooltip liked-content ".concat(l)},void 0,n?"Unlike":"Like"))}},NWyy:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n("3Z9q"),o=n("VDcQ"),r=n("+zma"),a=n("pLUK");function s(e){var t=e.model,n=e.children,s=(0,o.I0)(),c=(0,o.v9)((function(e){var n=e.entities.models[t.uid];return{authUserUid:r.wl.authUser.uid(e),doesLike:r.wl.authUser.doesLike(t.uid,e),likeCount:n?n.likeCount:t.likeCount,hasModelEntity:!!n}})),u=c.doesLike,l=c.likeCount,d=c.hasModelEntity,h=c.authUserUid,g=(0,a.Z)(i.useCallback((function(){return d||s(r.Nw.entities.update({models:[t]})),s(r.Nw.authUser.toggleLikeModel(t.uid))}),[t,s,d]));return i.useEffect((function(){h&&s(r.Nw.authUser.getDoesLike(t.uid))}),[s,t.uid,h]),n({doesLike:u,onToggleLike:g,likeCount:l})}}}]);